Container
===
- 각각의 도커 컨테이너는 호스트 컴퓨터의 운영체제를 공유하므로 필요한 리소스가 크게 경감

- 실행이 빠름
- 같은 호스트 컴퓨터에서 가상 머신에 비해 더 많은 수의 애플리케이션 실행 가능
- 외부와 독립된 환경 제공

---
### 컨테이너를 원격 컴퓨터처럼 사용하기

    `docker container run --interactive --tty [container]`

- 컨테이너를 실행하고 실행된 컨테이너에 접속
- interactive 플래그로 컨테이너에 접속
- tty 플래그로 터미널 세션을 통해 컨테이너 조작


<br>

커맨드
```
# 실행중인 컨테이너 정보
docker container ls

# 대상 컨테이너에서 실행중인 프로세스 목록
docker container top [container-id 처음몇글자]

# 대상 컨테이너의 로그
docker container logs [container-id 처음몇글자]

# 대상 컨테이너의 상세 정보
docker container inspect [id]

# 실행중인 컨테이너의 상태 확인 (CPU, Mem, network, disk...)
docker container stats [id]

# 컨테이너 삭제 (--force 플래그로 실행중인 컨테이너도 삭제 가능)
docker container rm [id]  

# 모든 컨테이너 삭제
docker container rm --force $(docker container ls --all --quiet)

# 정지된 (동작중인) 컨테이너 시작(정지)
docker container start/stop [CONTAINER] ... 

```


<br>

    **도커를 사용하는 한 컨테이너는 모두 똑같다**
    - 모든 애플리케이션 위에 관리를 위한 계층이 하나 추가됨


---
### 컨테이너를 사용해 웹사이트 호스팅하기
백그라운드에서 계속 동작하게 하려면 아래처럼
    
    docker container run --detach --publish 8080:80 diamol/ch02-hello-diamol-web

- --detach : 컨테이너를 백그라운드에서 실행하며 컨테이너 ID 를 출력
- --publish : 컨테이너의 포트를 호스트 컴퓨터에 공개
- 8080:80 : 호스트의 8080 포트를 컨테이너의 80번 포트로 포워딩
- 컨테이너는 기본적으로 외부환경에 노출되지 않음 (가상 네트워크의 주소를 가지고 있음)

---
<br/>

**$() 문법은 괄호 안 명령의 출력을 다른 명령으로 전달.**


    

---
---
### 도커가 컨테이너를 실행하는 원리
1. docker api 를 통해 도커 엔진의 기능에 접근
    - 도커 엔진은 도커의 관리 기능을 맡는 컴포넌트. 
    - 도커 api 는 표준 http 기반 rest api
2. 도커 엔진은 백그라운드로 동작하면서 컨테이너와 이미지를 관리
3. 도커 명령행 인터페이스는 도커 api 의 클라이언트. (docker cli)
4. 도커 엔진과 상호작용할 수 있는 유일한 방법은 api를 통하는 방법뿐
